<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>AbstractProtocolRunner (SAFS API DOCUMENT)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AbstractProtocolRunner (SAFS API DOCUMENT)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":6,"i8":10,"i9":10,"i10":6,"i11":6,"i12":10,"i13":6,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractProtocolRunner.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../org/safs/sockets/AvailablePortFinder.html" title="class in org.safs.sockets"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/safs/sockets/AbstractProtocolRunner.html" target="_top">Frames</a></li>
<li><a href="AbstractProtocolRunner.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.safs.sockets</div>
<h2 title="Class AbstractProtocolRunner" class="title">Class AbstractProtocolRunner</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.safs.sockets.AbstractProtocolRunner</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable, <a href="../../../org/safs/sockets/ConnectionListener.html" title="interface in org.safs.sockets">ConnectionListener</a>, <a href="../../../org/safs/sockets/DebugListener.html" title="interface in org.safs.sockets">DebugListener</a>, <a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets">NamedListener</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../org/safs/android/messenger/RemoteClientRunner.html" title="class in org.safs.android.messenger">RemoteClientRunner</a>, <a href="../../../com/jayway/android/robotium/remotecontrol/solo/SoloRemoteControlRunner.html" title="class in com.jayway.android.robotium.remotecontrol.solo">SoloRemoteControlRunner</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">AbstractProtocolRunner</span>
extends java.lang.Object
implements java.lang.Runnable, <a href="../../../org/safs/sockets/ConnectionListener.html" title="interface in org.safs.sockets">ConnectionListener</a>, <a href="../../../org/safs/sockets/DebugListener.html" title="interface in org.safs.sockets">DebugListener</a></pre>
<div class="block">This abstract class implements the necessary Threading of a <a href="../../../org/safs/sockets/SocketProtocol.html" title="class in org.safs.sockets"><code>SocketProtocol</code></a>.  
 The class provides the implementation needed by processes running on 
 Windows, *nix, or Mac to control a remote client complying with this SocketProtocol.
 <p>
 Concrete subclasses must implement the abstract processProtocolMessage(String) in order 
 to parse and process the messages received.
 <p>
 Currently, this server expects remote TCP services to be accepting connections on port 2410 
 as required by the underlying SocketProtocol.
 <p>
 Currently, this server uses port 2411 to contact and attempt a connection to those remote 
 TCP services as required by the underlying SocketProtocol.
 <p>
 Both sides eventually need to be able to use a broader range of ports to prevent conflicts with 
 other system resources.
 <p>
 There is an initial handshake or verification that occurs between this remote controller server and the 
 on-device Service to confirm the device port owners conform to the SocketProtocol.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/SocketProtocol.html" title="class in org.safs.sockets"><code>SocketProtocol</code></a>, 
<a href="../../../org/safs/sockets/SocketProtocol.html#MSG_PROTOCOL_VERSION_QUERY"><code>SocketProtocol.MSG_PROTOCOL_VERSION_QUERY</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#Z:Z_debugEnabled">_debugEnabled</a></span></code>
<div class="block">set to false to disable debug logging and improve performance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/safs/sockets/SocketProtocol.html" title="class in org.safs.sockets">SocketProtocol</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#protocolserver">protocolserver</a></span></code>
<div class="block">The underlying SocketProtocol instance performing the actual TCP communication.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Vector</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#runnerlisteners">runnerlisteners</a></span></code>
<div class="block">All Listeners registered with this instance--whether they be simple NamedListeners, 
 DebugListeners, or ConnectionListeners.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#AbstractProtocolRunner--">AbstractProtocolRunner</a></span>()</code>
<div class="block">Default no-op constructor setting using all defaults.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#addListener-org.safs.sockets.NamedListener-">addListener</a></span>(<a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets">NamedListener</a>&nbsp;listener)</code>
<div class="block">Add any class or subclass of NamedListener to the registered Listeners list.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#debug-java.lang.String-">debug</a></span>(java.lang.String&nbsp;text)</code>
<div class="block">Convenience routine to route internal debug messages to registered DebugListeners.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#getListenerName--">getListenerName</a></span>()</code>
<div class="block"><a href="../../../org/safs/sockets/NamedListener.html#getListenerName--"><code>NamedListener.getListenerName()</code></a></div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#onReceiveConnection--">onReceiveConnection</a></span>()</code>
<div class="block">Notify all registered ConnectionListeners a 2-way SocketProtocol connection has been established.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#onReceiveDebug-java.lang.String-">onReceiveDebug</a></span>(java.lang.String&nbsp;message)</code>
<div class="block">Send all registered DebugListeners a Debug message received from a remote source.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#onReceiveLocalShutdown-int-">onReceiveLocalShutdown</a></span>(int&nbsp;cause)</code>
<div class="block">Notify all registered ConnectionListeners the 2-way SocketProtocol connection is shutting down 
 on our local side.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#onReceiveRemoteShutdown-int-">onReceiveRemoteShutdown</a></span>(int&nbsp;cause)</code>
<div class="block">Notify all registered ConnectionListeners the 2-way SocketProtocol connection is shutting down 
 from the remote side.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#processProtocolMessage-java.lang.String-">processProtocolMessage</a></span>(java.lang.String&nbsp;message)</code>
<div class="block">Concrete implementations must insert the parsing and processing of the messages 
 received from the underlying SocketProtocol.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#removeListener-org.safs.sockets.NamedListener-">removeListener</a></span>(<a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets">NamedListener</a>&nbsp;listener)</code>
<div class="block">Remove a Listener from the list of registered Listeners for this instance.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#run--">run</a></span>()</code>
<div class="block">Required Runnable interface for the Threaded execution of the underlying SocketProtocol.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#sendDispatchFile-java.lang.String-">sendDispatchFile</a></span>(java.lang.String&nbsp;filepath)</code>
<div class="block">Send the remote client a dispatch file message with the filepath to a file that 
 should be readable by the remote client.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#sendDispatchProps-java.util.Properties-">sendDispatchProps</a></span>(java.util.Properties&nbsp;trd)</code>
<div class="block">Send the remote client a dispatch Properties message containing a Serialized 
 Properties object containing all the data needed for 
 the execution of the Dispatch.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#sendProtocolMessage-java.lang.String-">sendProtocolMessage</a></span>(java.lang.String&nbsp;message)</code>
<div class="block">Send an arbitrary message through our SocketProtocol.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#sendShutdown--">sendShutdown</a></span>()</code>
<div class="block">Send a shutdown command to the remote client.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#setListenerName-java.lang.String-">setListenerName</a></span>(java.lang.String&nbsp;name)</code>
<div class="block"><code>NamedListener#setListenerName(String)</code></div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#shutdownThread--">shutdownThread</a></span>()</code>
<div class="block">Command the ProtocolRunner thread to shutdown.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Z:Z_debugEnabled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_debugEnabled</h4>
<pre>public&nbsp;boolean _debugEnabled</pre>
<div class="block">set to false to disable debug logging and improve performance.</div>
</li>
</ul>
<a name="runnerlisteners">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>runnerlisteners</h4>
<pre>protected&nbsp;java.util.Vector runnerlisteners</pre>
<div class="block">All Listeners registered with this instance--whether they be simple NamedListeners, 
 DebugListeners, or ConnectionListeners.</div>
</li>
</ul>
<a name="protocolserver">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>protocolserver</h4>
<pre>public&nbsp;<a href="../../../org/safs/sockets/SocketProtocol.html" title="class in org.safs.sockets">SocketProtocol</a> protocolserver</pre>
<div class="block">The underlying SocketProtocol instance performing the actual TCP communication.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractProtocolRunner--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractProtocolRunner</h4>
<pre>public&nbsp;AbstractProtocolRunner()</pre>
<div class="block">Default no-op constructor setting using all defaults.
 This creates a default SocketProtocol instance running in local controller mode with 
 this class added as a registered Debug and Connection Listener.
 <p>
 Subclass implementation should change any desired remote hostname/port settings and add 
 any other Listeners prior to starting the Runnable thread.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/SocketProtocol.html#SocketProtocol-org.safs.sockets.NamedListener-"><code>SocketProtocol.SocketProtocol(NamedListener)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="debug-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>debug</h4>
<pre>protected&nbsp;void&nbsp;debug(java.lang.String&nbsp;text)</pre>
<div class="block">Convenience routine to route internal debug messages to registered DebugListeners.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>text</code> - </dd>
</dl>
</li>
</ul>
<a name="addListener-org.safs.sockets.NamedListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>public&nbsp;boolean&nbsp;addListener(<a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets">NamedListener</a>&nbsp;listener)</pre>
<div class="block">Add any class or subclass of NamedListener to the registered Listeners list.
 This allows the chaining or pass-thru of notifications from the underlying SocketProtocol 
 object to the registered Listeners of this class.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the Listener was successfully registered. false if the Listener was 
 already registered.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets"><code>NamedListener</code></a>, 
<a href="../../../org/safs/sockets/DebugListener.html" title="interface in org.safs.sockets"><code>DebugListener</code></a>, 
<a href="../../../org/safs/sockets/ConnectionListener.html" title="interface in org.safs.sockets"><code>ConnectionListener</code></a></dd>
</dl>
</li>
</ul>
<a name="removeListener-org.safs.sockets.NamedListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre>public&nbsp;boolean&nbsp;removeListener(<a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets">NamedListener</a>&nbsp;listener)</pre>
<div class="block">Remove a Listener from the list of registered Listeners for this instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>listener</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the Listener was successfully removed. false if the Listener was 
 not previously registered.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets"><code>NamedListener</code></a>, 
<a href="../../../org/safs/sockets/DebugListener.html" title="interface in org.safs.sockets"><code>DebugListener</code></a>, 
<a href="../../../org/safs/sockets/ConnectionListener.html" title="interface in org.safs.sockets"><code>ConnectionListener</code></a></dd>
</dl>
</li>
</ul>
<a name="run--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Required Runnable interface for the Threaded execution of the underlying SocketProtocol.
 This thread implements the required sequence of events for both the local controller and 
 the remote client--both using a matching underlying SocketProtocol object--to connect through 
 TCP Sockets and continuously monitor and exchange UTF-8 messages until a request for 
 shutdown has been detected.
 <p>
 Subclasses of this abstract class would not normally change or override this method regardless 
 of being local controllers or remote clients.  This routine handles both through the SocketProtocol 
 object.
 <p>
 The thread constantly loops performing the following tasks:
 <p>
 <ol>
 <li>if not connected to a remote SocketProtocol, attempt to locate and connect to it.
 <li>check to see if the remote SocketProtocol has sent any valid content we need to dispatch.
 <li>if so, dispatch the content via <a href="../../../org/safs/sockets/AbstractProtocolRunner.html#processProtocolMessage-java.lang.String-"><code>processProtocolMessage(String)</code></a>
 <li>if not shutdown, loop again.
 </ol>
 <p>
 When exiting the loop due to a shutdown, all registered ConnectionListeners will be notified 
 via <a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveLocalShutdown-int-"><code>ConnectionListener.onReceiveLocalShutdown(int)</code></a> that a "normal" shutdown has occurred.  
 The thread will then attempt to finish by closing the SocketProtocol communication channels.
 <p>
 Note that <i>sending</i> messages from the local SocketProtocol to the remote SocketProtocol is 
 NOT handled in this thread.  Once the remote connection is made, registered ConnectionListeners
 are notified via <a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveConnection--"><code>ConnectionListener.onReceiveConnection()</code></a>.  Messages sent from the local 
 using class to the remote SocketProtocol are sent via <a href="../../../org/safs/sockets/AbstractProtocolRunner.html#sendProtocolMessage-java.lang.String-"><code>sendProtocolMessage(String)</code></a> and 
 usually from a different Thread.    
 Consequently, the two-way communication should be considered asynchronous.  Though it is expected 
 the local and remote clients will attempt to maintain whatever "synchronous" communication is  
 appropriate for their shared protocol implementation.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#sendProtocolMessage-java.lang.String-"><code>sendProtocolMessage(String)</code></a>, 
<a href="../../../org/safs/sockets/SocketProtocol.html#closeProtocolRunners--"><code>SocketProtocol.closeProtocolRunners()</code></a>, 
<a href="../../../org/safs/sockets/AbstractProtocolRunner.html#shutdownThread--"><code>shutdownThread()</code></a></dd>
</dl>
</li>
</ul>
<a name="shutdownThread--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdownThread</h4>
<pre>public&nbsp;void&nbsp;shutdownThread()</pre>
<div class="block">Command the ProtocolRunner thread to shutdown.  
 If the thread is running, this will ultimately null out all communication 
 streams and close the active socket connection (if any) to the remote client.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#run--"><code>run()</code></a></dd>
</dl>
</li>
</ul>
<a name="getListenerName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getListenerName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getListenerName()</pre>
<div class="block"><a href="../../../org/safs/sockets/NamedListener.html#getListenerName--"><code>NamedListener.getListenerName()</code></a></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../org/safs/sockets/NamedListener.html#getListenerName--">getListenerName</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/safs/sockets/NamedListener.html" title="interface in org.safs.sockets">NamedListener</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>name of listener.  Might be null.</dd>
</dl>
</li>
</ul>
<a name="setListenerName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setListenerName</h4>
<pre>public&nbsp;void&nbsp;setListenerName(java.lang.String&nbsp;name)</pre>
<div class="block"><code>NamedListener#setListenerName(String)</code></div>
</li>
</ul>
<a name="onReceiveDebug-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onReceiveDebug</h4>
<pre>public&nbsp;void&nbsp;onReceiveDebug(java.lang.String&nbsp;message)</pre>
<div class="block">Send all registered DebugListeners a Debug message received from a remote source.
 If no DebugListeners are registered, then the message may be routed to System.out.
 This will only happen if debug output is enabled--which it is by default.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../org/safs/sockets/DebugListener.html#onReceiveDebug-java.lang.String-">onReceiveDebug</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/safs/sockets/DebugListener.html" title="interface in org.safs.sockets">DebugListener</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - </dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/AbstractProtocolRunner.html#Z:Z_debugEnabled"><code>_debugEnabled</code></a>, 
<a href="../../../org/safs/sockets/DebugListener.html#onReceiveDebug-java.lang.String-"><code>DebugListener.onReceiveDebug(String)</code></a></dd>
</dl>
</li>
</ul>
<a name="onReceiveConnection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onReceiveConnection</h4>
<pre>public&nbsp;void&nbsp;onReceiveConnection()</pre>
<div class="block">Notify all registered ConnectionListeners a 2-way SocketProtocol connection has been established.
 If no ConnectionListeners are registered, then the notification may be routed to System.out.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveConnection--">onReceiveConnection</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/safs/sockets/ConnectionListener.html" title="interface in org.safs.sockets">ConnectionListener</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveConnection--"><code>ConnectionListener.onReceiveConnection()</code></a></dd>
</dl>
</li>
</ul>
<a name="onReceiveLocalShutdown-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onReceiveLocalShutdown</h4>
<pre>public&nbsp;void&nbsp;onReceiveLocalShutdown(int&nbsp;cause)</pre>
<div class="block">Notify all registered ConnectionListeners the 2-way SocketProtocol connection is shutting down 
 on our local side.
 If no ConnectionListeners are registered, then the notification may be routed to System.out.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveLocalShutdown-int-">onReceiveLocalShutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/safs/sockets/ConnectionListener.html" title="interface in org.safs.sockets">ConnectionListener</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>caus</code> - -- whether "normal", or not.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveLocalShutdown-int-"><code>ConnectionListener.onReceiveLocalShutdown(int)</code></a>, 
<a href="../../../org/safs/sockets/SocketProtocol.html#STATUS_SHUTDOWN_NORMAL"><code>SocketProtocol.STATUS_SHUTDOWN_NORMAL</code></a>, 
<a href="../../../org/safs/sockets/SocketProtocol.html#STATUS_SHUTDOWN_REMOTE_CLIENT"><code>SocketProtocol.STATUS_SHUTDOWN_REMOTE_CLIENT</code></a></dd>
</dl>
</li>
</ul>
<a name="onReceiveRemoteShutdown-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onReceiveRemoteShutdown</h4>
<pre>public&nbsp;void&nbsp;onReceiveRemoteShutdown(int&nbsp;cause)</pre>
<div class="block">Notify all registered ConnectionListeners the 2-way SocketProtocol connection is shutting down 
 from the remote side.
 If no ConnectionListeners are registered, then the notification may be routed to System.out.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveRemoteShutdown-int-">onReceiveRemoteShutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/safs/sockets/ConnectionListener.html" title="interface in org.safs.sockets">ConnectionListener</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>caus</code> - -- whether "normal", or not.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/ConnectionListener.html#onReceiveRemoteShutdown-int-"><code>ConnectionListener.onReceiveRemoteShutdown(int)</code></a>, 
<a href="../../../org/safs/sockets/SocketProtocol.html#STATUS_SHUTDOWN_NORMAL"><code>SocketProtocol.STATUS_SHUTDOWN_NORMAL</code></a>, 
<a href="../../../org/safs/sockets/SocketProtocol.html#STATUS_SHUTDOWN_REMOTE_CLIENT"><code>SocketProtocol.STATUS_SHUTDOWN_REMOTE_CLIENT</code></a></dd>
</dl>
</li>
</ul>
<a name="sendProtocolMessage-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendProtocolMessage</h4>
<pre>public&nbsp;boolean&nbsp;sendProtocolMessage(java.lang.String&nbsp;message)
                            throws java.io.InvalidObjectException</pre>
<div class="block">Send an arbitrary message through our SocketProtocol.
 Subclasses of AbstractProtocolRunner will usually define the message content and syntax 
 to be appropriate for whatever the application is trying to accomplish.  That is, different  
 applications will send and receive different messages.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if successfully sent</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.InvalidObjectException</code> - from the underlying SocketProtocol if no connection has 
 yet been made.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../org/safs/sockets/SocketProtocol.html#sendResponse-java.lang.String-"><code>SocketProtocol.sendResponse(String)</code></a></dd>
</dl>
</li>
</ul>
<a name="processProtocolMessage-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processProtocolMessage</h4>
<pre>public abstract&nbsp;void&nbsp;processProtocolMessage(java.lang.String&nbsp;message)</pre>
<div class="block">Concrete implementations must insert the parsing and processing of the messages 
 received from the underlying SocketProtocol.
 Subclasses of AbstractProtocolRunner will usually define the message content and syntax 
 to be appropriate for whatever the application is trying to accomplish.  That is, different  
 applications will send and receive different messages.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - </dd>
</dl>
</li>
</ul>
<a name="sendShutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendShutdown</h4>
<pre>public abstract&nbsp;boolean&nbsp;sendShutdown()</pre>
<div class="block">Send a shutdown command to the remote client.  The format or syntax of this will be 
 implementation specific.
 <p>
 A remote client Protocol Runner would implement this as a do-nothing method.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the message was successfully sent.</dd>
</dl>
</li>
</ul>
<a name="sendDispatchProps-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendDispatchProps</h4>
<pre>public abstract&nbsp;boolean&nbsp;sendDispatchProps(java.util.Properties&nbsp;trd)</pre>
<div class="block">Send the remote client a dispatch Properties message containing a Serialized 
 Properties object containing all the data needed for 
 the execution of the Dispatch.  The format or syntax of this will be 
 implementation specific.
 <p>
 A remote client Protocol Runner would implement this as a do-nothing method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>Properties</code> - trd to send</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the message was sent successfully.</dd>
</dl>
</li>
</ul>
<a name="sendDispatchFile-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sendDispatchFile</h4>
<pre>public abstract&nbsp;boolean&nbsp;sendDispatchFile(java.lang.String&nbsp;filepath)</pre>
<div class="block">Send the remote client a dispatch file message with the filepath to a file that 
 should be readable by the remote client.  The format or syntax of this will be 
 implementation specific.
 <p>
 A remote client Protocol Runner would implement this as a do-nothing method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filepath</code> - path to a remote client readable file.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the message was successfully sent.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractProtocolRunner.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../org/safs/sockets/AvailablePortFinder.html" title="class in org.safs.sockets"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/safs/sockets/AbstractProtocolRunner.html" target="_top">Frames</a></li>
<li><a href="AbstractProtocolRunner.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><i>Copyright &#169; SAS Institute. All Rights Reserved.</i></small></p>
</body>
</html>
