<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>tessFileParser (SAFS API DOCUMENT)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="tessFileParser (SAFS API DOCUMENT)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/tessFileParser.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/safs/tools/ocr/tesseract/TesseractOCREngine.html" title="class in org.safs.tools.ocr.tesseract"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/safs/tools/ocr/tesseract/tessFileParser.html" target="_top">Frames</a></li>
<li><a href="tessFileParser.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.safs.tools.ocr.tesseract</div>
<h2 title="Class tessFileParser" class="title">Class tessFileParser</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.safs.tools.ocr.tesseract.tessFileParser</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">tessFileParser</span>
extends java.lang.Object</pre>
<div class="block">Parses two types of Tesseract output data.
 <p>
 A UTF-8 file output by calling SafsTessdll.exe and, alternatively,  
 a UTF-8 file output by Tesseract.exe.
 <p>
 The DLL format file is the result of running TOCR to recognize 
 text in an image. As a text formated file, it contains not only every recognized letter but also its 
 coordinates in the image. 
 <p>
 Command: SafsTessdll.exe  imagefile.gif  resultUTF-8.txt  eng 
 Note: SafsTessdll.exe requires tessdll.dll. Both two files stay in C:\safs\bin.
 <p>
 Format of the UTF-8 from the DLL:
 <pre>
 ------------------------------------------------------------------------- 
 |A[41](132,32)->(149,13)
 |p[70](147,37)->(163,18)
 |p[70](162,37)->(178,18)    ---- Char[Unicode](left, bottom)->(right, top)
 |                           ---- \\ space 
 |&lt;nl>                       ---- \\ new line
 |&lt;para>                     ---- \\ paragraph
 -------------------------------------------------------------------------
 </pre>
 <p>
 <p>
 The Tesseract.EXE format file is the result of running TOCR to recognize 
 text in an image. As a text formated file, it contains not only every recognized letter but also its 
 coordinates in the image. 
 <p>
 Command: tesseract.exe  scaledImageFile.tif  resultUTF8  -l eng nobatch|batch.nochop makebox 
 <p>
 Format of the UTF-8 from the EXE:
 <pre>
 ------------------------------------------------------------------------- 
 |A 132 32 149 13
 |p 147 37 163 18
 |p 162 37 178 18     char left bottom right top
 -------------------------------------------------------------------------
 </pre>
 <p>
 Another caveat of the EXE output format is that coordinates are calculated assuming 
 0,0 is the bottom-left of image--NOT the top-left.  Thus, when converting to screen 
 coordinates the rect.y value must be recalculated to be:
 <p><ul> 
 rect.y = image.height - rect.y
 </ul>
 <p>
 In addition, versions of Tesseract before r344 (~May 19, 2010) had a bug in which 
 the bounds were always calculated about 11 or 12 pixels off in the y coordinate.
 <p>
 While it sounds more complicated to use the tesseract.exe version, the accuracy 
 of text recognition from this version is much higher than that of the DLL version.
 <p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>JunwuMa 
 <br>   MAR 12, 2010    Original Release
 <br> MAR 26, 2010    (JunwuMa) Refactoring and update to support UTF-8 format.
 <br> OCT 21, 2010    (Carl Nagle) Refactoring allowing tesseract.exe nobatch makebox coordinates.</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/safs/tools/ocr/tesseract/tessFileParser.html#tessFileParser-java.lang.String-">tessFileParser</a></span>(java.lang.String&nbsp;tessfile)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/safs/tools/ocr/tesseract/tessFileParser.html#getText--">getText</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.awt.Rectangle</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/safs/tools/ocr/tesseract/tessFileParser.html#getTextArea-java.lang.String-int-">getTextArea</a></span>(java.lang.String&nbsp;searchText,
           int&nbsp;index)</code>
<div class="block">Get the area of the Nth instance of searchText that is sought in parsing result.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/safs/tools/ocr/tesseract/tessFileParser.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>
<div class="block">Can be used to unit test.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/safs/tools/ocr/tesseract/tessFileParser.html#setTessFile-java.lang.String-">setTessFile</a></span>(java.lang.String&nbsp;tessfile)</code>
<div class="block">tessfile must be a UTF formated text file output by SafsTessdll.exe.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="tessFileParser-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>tessFileParser</h4>
<pre>tessFileParser(java.lang.String&nbsp;tessfile)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setTessFile-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTessFile</h4>
<pre>void&nbsp;setTessFile(java.lang.String&nbsp;tessfile)</pre>
<div class="block">tessfile must be a UTF formated text file output by SafsTessdll.exe.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tessfile</code> - </dd>
</dl>
</li>
</ul>
<a name="getText--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getText</h4>
<pre>java.lang.String&nbsp;getText()</pre>
</li>
</ul>
<a name="getTextArea-java.lang.String-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTextArea</h4>
<pre>public&nbsp;java.awt.Rectangle&nbsp;getTextArea(java.lang.String&nbsp;searchText,
                                      int&nbsp;index)</pre>
<div class="block">Get the area of the Nth instance of searchText that is sought in parsing result.
 It represents the area of searchText in image.
 <P>
 There are two modes in which the text coordinate information can be extracted.  
 The TessDLL mode and the Tesseract.exe mode.  This routine will detect which mode 
 was used and will decipher the coordinate information accordingly.
 <p>
 The TessDLL mode returns a normal Rectangle using the standard coordinate system of 
 0,0 indicating the top-left corner of the search area and all coordinates are relative 
 to that top-left corner.
 <p>
 The Tesseract.exe mode returns a ReverseRectangle because the coordinate system puts 
 0,0 at the bottom-left corner of the search area and all coordinates are relative to 
 that bottom-left corner.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>searchText,</code> - string for which to search in tessFileParser, any leading and trailing whitespace will 
                    be removed before seeking.</dd>
<dd><code>index,</code> - starts from 1, specifies to find the Nth instance of searchText. Uses 1 if index<=0.
 The index of the text is the same regardless of the coordinate search mode that was used.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Rectangle, ReverseRectangle, or null. The area of searchText found; null if not found.
 If a ReverseRectangle is returned it is expected the user will transform\convert the Y coordinates 
 according to the height of the image\searchArea that was used.  For example, if the area 
 was 800 pixels high and the match was found at the "top" of the area at 1,1 then the 
 ReverseRectangle would contain coordinates 1,799.  To get the true 1,1 the user would have 
 to recalculate Y with 800-799 to get at 1,1.</dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">Can be used to unit test.
 <p>
 java org.safs.tools.ocr.tesseract.tessFileParser [-f parseFile] [findtext]
 <p>
 parseFile - path to a test ~tempcoor.txt file to process.<br>
 findtext - a substring of text to find coordinates for.<br></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - -- 3 array items: [-f parseFile] [findtext]
 parseFile - path to a test ~tempcoor.txt file to process.<br>
 findtext - a substring of text to find coordinates for.<br></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/tessFileParser.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/safs/tools/ocr/tesseract/TesseractOCREngine.html" title="class in org.safs.tools.ocr.tesseract"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/safs/tools/ocr/tesseract/tessFileParser.html" target="_top">Frames</a></li>
<li><a href="tessFileParser.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><i>Copyright &#169; SAS Institute. All Rights Reserved.</i></small></p>
</body>
</html>
